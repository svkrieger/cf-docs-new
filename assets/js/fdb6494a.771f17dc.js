"use strict";(self.webpackChunkcf_docs_new=self.webpackChunkcf_docs_new||[]).push([[8177],{4423:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"docs-deploying-cf/docs/dns_prereqs","title":"Setting Up DNS for Your Environment","description":"This topic describes how to set up DNS for your Cloud Foundry environment.","source":"@site/content_repos/docs-deploying-cf/docs/dns_prereqs.md","sourceDirName":"docs-deploying-cf/docs","slug":"/docs-deploying-cf/docs/dns_prereqs","permalink":"/cf-docs-new/docs-deploying-cf/docs/dns_prereqs","draft":false,"unlisted":false,"editUrl":"https://github.com/cloudfoundry/docs-cloudfoundry-concepts/tree/master/content_repos/docs-deploying-cf/docs/dns_prereqs.md","tags":[],"version":"current","lastUpdatedAt":1744293255000,"frontMatter":{"title":"Setting Up DNS for Your Environment","owner":"Release Integration"},"sidebar":"operationsGuideSidebar","previous":{"title":"Overview of Deploying Cloud Foundry","permalink":"/cf-docs-new/docs-deploying-cf/"}}');var t=n(4848),r=n(8453);const i={title:"Setting Up DNS for Your Environment",owner:"Release Integration"},d=void 0,a={},c=[{value:"<a></a> Domains",id:"-domains",level:2},{value:"<a></a> Example Topologies",id:"-example-topologies",level:2},{value:"<a></a> AWS",id:"-aws",level:3},{value:"<a></a> HAProxy",id:"-haproxy",level:3}];function l(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"This topic describes how to set up DNS for your Cloud Foundry environment."}),"\n",(0,t.jsxs)(o.h2,{id:"-domains",children:[(0,t.jsx)("a",{id:"domains"})," Domains"]}),"\n",(0,t.jsx)(o.p,{children:"You must create several wildcard DNS records to point to your load balancers and routers. Consult the table below for details about these wildcard DNS records."}),"\n",(0,t.jsxs)(o.p,{children:["Cloud Foundry gives each application its own hostname in your app domain. With a wildcard DNS record, every hostname in your domain resolves to the IP address of your router or load balancer, and you do not need to configure an A record for each app hostname. For example, if you create a DNS record for a system domain ",(0,t.jsx)("code",{children:"*.example.com"})," pointing to your router, every application deployed to the ",(0,t.jsx)("code",{children:"example.com"})," domain resolves to the IP address of your router."]}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Domain"}),(0,t.jsx)("th",{children:"Example"}),(0,t.jsx)("th",{children:"Notes"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"TCP"}),(0,t.jsx)("td",{children:"*.tcp.example.com"}),(0,t.jsx)("td",{children:"This handles TCP traffic destined for the TCP Router."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"HTTP"}),(0,t.jsx)("td",{children:"*.sys.example.com"}),(0,t.jsx)("td",{children:"This is the system domain that handles HTTP traffic for system components destined for the Gorouter."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"HTTP"}),(0,t.jsx)("td",{children:"*.example.com"}),(0,t.jsx)("td",{children:"This is the app domain that handles HTTP traffic for applications destined for the Gorouter."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"WebSockets"}),(0,t.jsx)("td",{children:"*.ws.example.com"}),(0,t.jsx)("td",{children:"This is an optional domain that handles WebSocket traffic destined for the Gorouter."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"SSH"}),(0,t.jsx)("td",{children:"*.ssh.example.com"}),(0,t.jsx)("td",{children:"This is an optional domain that provides SSH access to application containers."})]})]}),"\n",(0,t.jsxs)(o.h2,{id:"-example-topologies",children:[(0,t.jsx)("a",{id:"examples"})," Example Topologies"]}),"\n",(0,t.jsx)(o.p,{children:"Your exact configuration may vary significantly depending on your IaaS and your load balancing configuration. Below are the following example topologies."}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.a,{href:"#aws",children:"An Amazon Web Services"})," (AWS) deployment using Elastic Load Balancer (ELBs)"]}),"\n",(0,t.jsxs)(o.li,{children:["A deployment that uses ",(0,t.jsx)(o.a,{href:"#haproxy",children:"HAProxy"})," for load balancing"]}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:["The diagrams below show which particular jobs will have traffic routed to them by load balancers. The instance groups may have different names. Run the ",(0,t.jsx)(o.code,{children:"bosh instances"})," command to see the instance groups."]}),"\n",(0,t.jsxs)(o.p,{children:["For example, in a default ",(0,t.jsx)(o.a,{href:"https://github.com/cloudfoundry/cf-deployment",children:"cf-deployment"}),", the ",(0,t.jsx)(o.code,{children:"ssh_proxy"})," job is deployed to an instance group name ",(0,t.jsx)(o.code,{children:"scheduler"}),". Your load balancers must route traffic to that VM."]}),"\n",(0,t.jsxs)(o.h3,{id:"-aws",children:[(0,t.jsx)("a",{id:"aws"})," AWS"]}),"\n",(0,t.jsx)(o.p,{children:"This topology has DNS configured to point five domains to four ELBs:"}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"AWS DNS",src:n(9819).A+"",width:"856",height:"658"})}),"\n",(0,t.jsxs)(o.h3,{id:"-haproxy",children:[(0,t.jsx)("a",{id:"haproxy"})," HAProxy"]}),"\n",(0,t.jsx)(o.p,{children:"This topology has DNS configured to point five domains to one HAProxy:"}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"HAProxy DNS",src:n(8483).A+"",width:"962",height:"722"})})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>d});var s=n(6540);const t={},r=s.createContext(t);function i(e){const o=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(r.Provider,{value:o},e.children)}},8483:(e,o,n)=>{n.d(o,{A:()=>s});const s=n.p+"assets/images/haproxy-dns-prereq-e36eae9132f0cee6f9af1cdeca18f226.png"},9819:(e,o,n)=>{n.d(o,{A:()=>s});const s=n.p+"assets/images/aws-dns-prereq-90345bf4a85df7ae8fb23ed5c8032318.png"}}]);