"use strict";(self.webpackChunkcf_docs_new=self.webpackChunkcf_docs_new||[]).push([[8457],{1702:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"docs-buildpacks/docs/cloud-native-buildpacks/index","title":"Cloud Native Buildpacks","description":"Cloud Native Buildpacks (CNBs) usually take your application source code and transform it into a container. If you are familiar with their concepts, there are some differences:","source":"@site/content_repos/docs-buildpacks/docs/cloud-native-buildpacks/index.md","sourceDirName":"docs-buildpacks/docs/cloud-native-buildpacks","slug":"/docs-buildpacks/docs/cloud-native-buildpacks/","permalink":"/cf-docs-new/docs-buildpacks/docs/cloud-native-buildpacks/","draft":false,"unlisted":false,"editUrl":"https://github.com/cloudfoundry/docs-cloudfoundry-concepts/tree/master/content_repos/docs-buildpacks/docs/cloud-native-buildpacks/index.md","tags":[],"version":"current","lastUpdatedAt":1744211508000,"frontMatter":{"title":"Cloud Native Buildpacks","owner":"Buildpacks"},"sidebar":"devGuideSidebar","previous":{"title":"Binary buildpack","permalink":"/cf-docs-new/docs-buildpacks/docs/classic-buildpacks/binary/"},"next":{"title":"Working with Cloud Native Buildpacks in Cloud Foundry","permalink":"/cf-docs-new/docs-buildpacks/docs/cloud-native-buildpacks/using"}}');var a=s(4848),c=s(8453);const t={title:"Cloud Native Buildpacks",owner:"Buildpacks"},d=void 0,l={},o=[{value:"<a></a> Push an app",id:"-push-an-app",level:2},{value:"<a></a> Private Cloud Native Buildpacks",id:"-private-cloud-native-buildpacks",level:3}];function r(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Cloud Native Buildpacks (CNBs) usually take your application source code and transform it into a container. If you are familiar with their concepts, there are some differences:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"During build, instead of a container image, a droplet is produced. However, this should go unnoticed by the end user."}),"\n",(0,a.jsx)(n.li,{children:"CNBs are not yet available as system buildpacks. Users always need to provide the list of buildpacks."}),"\n",(0,a.jsxs)(n.li,{children:["Using the new ",(0,a.jsx)(n.code,{children:"lifecycle"})," property is currently only possible using a manifest."]}),"\n",(0,a.jsxs)(n.li,{children:["Build- and run environment/image will be provided by the Cloud Foundry stack available on your platform (probably ",(0,a.jsx)(n.a,{href:"https://github.com/cloudfoundry/cflinuxfs4",children:"cflinuxfs4"}),")."]}),"\n",(0,a.jsx)(n.li,{children:"Using stacks provided by Paketo is not possible at the moment."}),"\n",(0,a.jsx)(n.li,{children:"Software Bill of Material (SBOM) is missing operating system packages and is not directly accessible."}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"-push-an-app",children:[(0,a.jsx)("a",{id:"cnb-example"})," Push an app"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/cloudfoundry-samples/cf-sample-app-nodejs",children:"Sample Node.js app"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["While this sample is shipped with using Classic Buildpacks, it can be easily build with CNBs by replacing ",(0,a.jsx)(n.code,{children:"manifest.yaml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"---\napplications:\n- name: cf-nodejs\n  lifecycle: cnb\n  buildpacks:\n  - docker://gcr.io/paketo-buildpacks/nodejs\n  memory: 512M\n  instances: 1\n  random-route: true\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Using the ",(0,a.jsx)(n.code,{children:"lifecycle"})," property, the desired Buildpack variant can be selected. See the ",(0,a.jsx)(n.a,{href:"../../devguide/deploy-apps/manifest-attributes.html#lifecycle",children:"reference section"})," for more details. In this example, the ",(0,a.jsx)(n.a,{href:"https://github.com/paketo-buildpacks/nodejs",children:"nodejs CNB"})," container image is selected."]}),"\n",(0,a.jsxs)(n.h3,{id:"-private-cloud-native-buildpacks",children:[(0,a.jsx)("a",{id:"cnb-example-credentials"})," Private Cloud Native Buildpacks"]}),"\n",(0,a.jsx)("p",{class:"note",children:(0,a.jsx)(n.p,{children:"You must use cf CLI v8.9.0 or later."})}),"\n",(0,a.jsxs)(n.p,{children:["Cloud Native Buildpacks can be consumed from private registries, by using the ",(0,a.jsx)(n.code,{children:"CF_CNB_REGISTRY_CREDS"})," environment variable, in two different ways: Username and password combination or a token:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export CF_CNB_REGISTRY_CREDS=\'{"<registry>": {"username":"<username>", "password":"<password>"}}\'\nexport CF_CNB_REGISTRY_CREDS=\'{"<registry>": {"token":"<token>"}}\'\n'})}),"\n",(0,a.jsx)(n.p,{children:"Example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"---\napplications:\n- name: cf-nodejs\n  lifecycle: cnb\n  buildpacks:\n  - docker://my-registry-a.corp/nodejs\n  - docker://my-registry-b.corp/dynatrace\n  memory: 512M\n  instances: 1\n  random-route: true\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export CF_CNB_REGISTRY_CREDS=\'{"my-registry-a.corp": {"token":"aaaaaa"}, "my-registry-b.corp": {"token":"bbbbbb"}}\'\ncf push\n'})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const a={},c=i.createContext(a);function t(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);