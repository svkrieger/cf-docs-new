"use strict";(self.webpackChunkcf_docs_new=self.webpackChunkcf_docs_new||[]).push([[8377],{1251:(e,s,n)=>{n.d(s,{A:()=>i});const i={platform_code:"CF",partials:{}}},7042:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"docs-dev-guide/docs/deploy-apps/deploy-app","title":"Pushing your app with Cloud Foundry CLI (cf push)","description":"The cf CLI command cf push pushes apps to . There are two main ways to run the cf push command:","source":"@site/content_repos/docs-dev-guide/docs/deploy-apps/deploy-app.mdx","sourceDirName":"docs-dev-guide/docs/deploy-apps","slug":"/docs-dev-guide/docs/deploy-apps/deploy-app","permalink":"/cf-docs-new/docs-dev-guide/docs/deploy-apps/deploy-app","draft":false,"unlisted":false,"editUrl":"https://github.com/cloudfoundry/docs-cloudfoundry-concepts/tree/master/content_repos/docs-dev-guide/docs/deploy-apps/deploy-app.mdx","tags":[],"version":"current","lastUpdatedAt":1744211842000,"frontMatter":{"title":"Pushing your app with Cloud Foundry CLI (cf push)","owner":"CAPI"},"sidebar":"devGuideSidebar","previous":{"title":"How to push your app with Cloud Foundry CLI (cf push)","permalink":"/cf-docs-new/docs-dev-guide/docs/deploy-apps/"},"next":{"title":"Cloud Foundry Buildpacks","permalink":"/cf-docs-new/docs-buildpacks/"}}');var o=n(4848),a=n(8453),t=n(1251);const r={title:"Pushing your app with Cloud Foundry CLI (cf push)",owner:"CAPI"},l=void 0,p={},d=[{value:"<a></a> Prerequisites",id:"-prerequisites",level:2},{value:"<a></a> Push with defaults",id:"-push-with-defaults",level:2},{value:"<a></a> Default route",id:"-default-route",level:3},{value:"<a></a> Example session",id:"-example-session",level:3},{value:"<a></a> Push with custom settings",id:"-push-with-custom-settings",level:2},{value:"<a></a> Customize basic app settings (optional)",id:"-customize-basic-app-settings-optional",level:3},{value:"<a></a> Limit the upload files (optional)",id:"-limit-the-upload-files-optional",level:3},{value:"<a></a> Configure app initialization (optional)",id:"-configure-app-initialization-optional",level:3},{value:"<a></a> Custom push the app",id:"-custom-push-the-app",level:3},{value:"<a></a> Configure app services (optional)",id:"-configure-app-services-optional",level:3},{value:"<a></a> Build custom push workflows (optional)",id:"-build-custom-push-workflows-optional",level:3},{value:"<a></a> App updates and downtime",id:"-app-updates-and-downtime",level:2},{value:"<a></a> Troubleshoot app push problems",id:"-troubleshoot-app-push-problems",level:2}];function c(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{APIEndpoint:n,AppDomain:i,AppRuntimeAbbr:r,RecommendedBy:l,SSL:p}=s;return n||u("APIEndpoint",!0),i||u("AppDomain",!0),r||u("AppRuntimeAbbr",!0),l||u("RecommendedBy",!0),p||u("SSL",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["The cf CLI command ",(0,o.jsx)(s.code,{children:"cf push"})," pushes apps to ",(0,o.jsx)(r,{}),". There are two main ways to run the ",(0,o.jsx)(s.code,{children:"cf push"})," command:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Run ",(0,o.jsx)(s.code,{children:"cf push APP-NAME"})," to push an app using default settings. For more information, see ",(0,o.jsx)(s.a,{href:"#default-push",children:"Push with defaults"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Run the ",(0,o.jsx)(s.code,{children:"cf push"})," command with flags and helper files to customize:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"How the pushed app runs, including its route, instance count, disk size limits, memory limits, and log rate limits"}),"\n",(0,o.jsx)(s.li,{children:"How push works: whether it's configured with a manifest, runs a startup script, or limits files uploaded to the Cloud Controller"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["For more information about custom settings, see ",(0,o.jsx)(s.a,{href:"#custom-push",children:"Push with custom settings"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["For an explanation of what ",(0,o.jsx)(r,{})," does when you run ",(0,o.jsx)(s.code,{children:"cf push"}),", see ",(0,o.jsx)(s.a,{href:"../../concepts/how-applications-are-staged.html",children:"How Apps are\nStaged"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["For information about the life cycle of an app, see ",(0,o.jsx)(s.a,{href:"app-lifecycle.html",children:"Application container life cycle"}),"."]}),"\n",(0,o.jsxs)(s.h2,{id:"-prerequisites",children:[(0,o.jsx)("a",{id:"prepare"})," Prerequisites"]}),"\n",(0,o.jsxs)(s.p,{children:["Before you push your app to ",(0,o.jsx)(r,{}),", ensure that:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:['Your app is "cloud-ready." ',(0,o.jsx)(r,{})," behaviors related to file storage, HTTP sessions, and port usage might require modifications to your app. To prepare an app to be pushed to ",(0,o.jsx)(r,{}),", see:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"prepare-to-deploy.html",children:"Considerations for designing and running an app in the cloud"})}),"\n",(0,o.jsxs)(s.li,{children:["Any ",(0,o.jsx)(s.a,{href:"../../buildpacks/index.html",children:"Buildpacks"})," guides specific to your app language or framework, such as ",(0,o.jsx)(s.a,{href:"../../buildpacks/ruby/gsg-ror.html",children:"Getting started deploying Ruby on Rails apps"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Your ",(0,o.jsx)(r,{})," deployment supports the type of app you are going to push, or you have the URL of an externally-available buildpack that can stage the app."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"All required app resources are uploaded. For example, you might need to include a database driver."}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"You have your target and credentials:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["The API endpoint for your ",(0,o.jsx)(r,{})," deployment. Also known as the target URL, this is ",(0,o.jsx)(n,{}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Your user name and password for the ",(0,o.jsx)(r,{})," deployment."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"You are logged into your app's target org and space."}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Decide the org and space where you want to push your app. You might have access to one or more org and space."}),"\n",(0,o.jsxs)(s.li,{children:["Log in to this target org and space with ",(0,o.jsx)(s.code,{children:"cf login"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"Your app can access every service that it uses, because an instance of the service runs in, or is shared with, the app's space."}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["For information about sharing service instances across spaces, see ",(0,o.jsx)(s.a,{href:"../services/sharing-instances.html",children:"Sharing service instances"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Typical services that cloud apps use include databases, message queues, and key-value stores."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.h2,{id:"-push-with-defaults",children:[(0,o.jsx)("a",{id:"default-push"})," Push with defaults"]}),"\n",(0,o.jsx)(s.p,{children:"To push an app with default settings:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Choose a name for the app. The app name must consist of alphanumeric characters and be unique to your ",(0,o.jsx)(r,{})," deployment."]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["To use an app name that is not unique, customize the app's route as described in ",(0,o.jsx)(s.a,{href:"#custom-route",children:"Customize the route"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Apps running at their default routes require unique names because default routes are based on app names, and all routes must be globally unique."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"Run:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"cf push APP-NAME\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Where ",(0,o.jsx)(s.code,{children:"APP-NAME"})," is the name of the app."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.h3,{id:"-default-route",children:[(0,o.jsx)("a",{id:"default-route"})," Default route"]}),"\n",(0,o.jsxs)(s.p,{children:["An app's route is the URL at which it runs. ",(0,o.jsx)(r,{})," assembles the route for a pushed app from a host name and a domain."]}),"\n",(0,o.jsxs)(s.p,{children:["By default, ",(0,o.jsx)(r,{})," sets the host name and domain as follows:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Hostname:"})," The name of the app name, as specified in the ",(0,o.jsx)(s.code,{children:"cf push"})," command. If the app name contains underscores, ",(0,o.jsx)(r,{})," converts them to hyphens when creating the app's route."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Domain:"})," The default apps domain for your ",(0,o.jsx)(r,{})," deployment."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["For example, an app named ",(0,o.jsx)(s.code,{children:"example-app"})," running on ",(0,o.jsx)(r,{})," with an apps domain ",(0,o.jsx)(s.code,{children:"apps.example.com"})," runs at the URL\n",(0,o.jsx)(s.code,{children:"https://example-app.apps.example.com"})," by default."]}),"\n",(0,o.jsxs)(s.p,{children:["For more information about routes and domains, see ",(0,o.jsx)(s.a,{href:"routes-domains.html",children:"Routes and domains"}),"."]}),"\n",(0,o.jsx)(p,{}),"\n",(0,o.jsxs)(s.h3,{id:"-example-session",children:[(0,o.jsx)("a",{id:"example"})," Example session"]}),"\n",(0,o.jsxs)(s.p,{children:["The following example output for ",(0,o.jsx)(s.code,{children:"cf push example-app"})," demonstrates how ",(0,o.jsx)(r,{})," assigns default values to an app you push:"]}),"\n",(0,o.jsxs)("pre",{class:"terminal",children:[(0,o.jsxs)(s.p,{children:["Creating app example-app in org example-org / space development as a.user@",(0,o.jsx)(i,{}),"...\nOK"]}),(0,o.jsxs)(s.p,{children:["Creating route example-app.",(0,o.jsx)(i,{}),"...\nOK"]}),(0,o.jsxs)(s.p,{children:["Binding example-app.",(0,o.jsx)(i,{})," to example-app...\nOK"]}),(0,o.jsx)(s.p,{children:"Uploading example-app...\nUploading app: 560.1K, 9 files\nOK"}),(0,o.jsxs)(s.p,{children:["Starting app example-app in org example-org / space development as a.user@",(0,o.jsx)(i,{}),"...\n-----\x3e Downloaded app package (552K)\nOK\n-----\x3e Using Ruby version: ruby-1.9.3\n-----\x3e Installing dependencies using Bundler version 1.3.2\nRunning: bundle install --without development",":test"," --path\nvendor/bundle --binstubs vendor/bundle/bin --deployment\nInstalling rack (1.5.1)\nInstalling rack-protection (1.3.2)\nInstalling tilt (1.3.3)\nInstalling sinatra (1.3.4)\nUsing bundler (1.3.2)\nUpdating files in vendor/cache\nYour bundle is complete! It was installed into ./vendor/bundle\nCleaning up the bundler cache.\n-----\x3e Uploading droplet (23M)"]}),(0,o.jsx)(s.p,{children:"1 of 1 instances running"}),(0,o.jsx)(s.p,{children:"App started"}),(0,o.jsxs)(s.p,{children:["Showing health and status for app example-app in org example-org / space development as a.user@",(0,o.jsx)(i,{}),"...\nOK"]}),(0,o.jsxs)(s.p,{children:["requested state: started\ninstances: 1/1\nusage: 1G x 1 instances\nurls: example-app.",(0,o.jsx)(i,{})]}),(0,o.jsx)(s.p,{children:"state     since                    cpu    memory        disk          logging\n#0   running   2022-09-14 05:07:18 PM   0.0%   18.5M of 1G   52.5M of 1G   3B/s of 1M/s"})]}),"\n",(0,o.jsxs)(s.h2,{id:"-push-with-custom-settings",children:[(0,o.jsx)("a",{id:"custom-push"})," Push with custom settings"]}),"\n",(0,o.jsx)(s.p,{children:"Pushing an app with custom settings typically proceeds as follows:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#basic-settings",children:"Customize Basic App Settings (Optional)"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#custom-route",children:"Customize the Route (Optional)"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#exclude",children:"Limit the Upload Files (Optional)"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#profile",children:"Configure App Initialization (Optional)"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#custom-cf-push",children:"Custom Push the App"})}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"#services",children:"Configure App Services (Optional)"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"The following sections detail these steps."}),"\n",(0,o.jsxs)(s.h3,{id:"-customize-basic-app-settings-optional",children:[(0,o.jsx)("a",{id:"basic-settings"})," Customize basic app settings (optional)"]}),"\n",(0,o.jsx)(s.p,{children:"Basic settings to customize when pushing an app include:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Name:"})," You can use any series of alphanumeric characters as the name of your app."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Instances:"})," Generally speaking, the more app instances you run, the less downtime your app experiences. If your app is still in development, running a single instance can simplify troubleshooting. For any production app, ",(0,o.jsx)(l,{})," recommends a minimum of two instances."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Memory limit:"})," The maximum amount of memory that each instance of your app can consume. If an app instance exceeds this limit,\n",(0,o.jsx)(r,{})," restarts the instance. If an app instance exceeds its memory limit repeatedly in a short period of time,\n",(0,o.jsx)(r,{})," delays restarting the app instance."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Disk space limit:"})," The maximum amount of disk space that each instance of your app can consume. If an app instance exceeds this limit,\n",(0,o.jsx)(r,{})," restarts the instance. If an app instance exceeds its disk space limit repeatedly in a short period of time,\n",(0,o.jsx)(r,{})," delays restarting the app instance."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Log rate limit:"})," The maximum number of logs that each instance of your app can send to Loggregator. If an app instance exceeds this limit,\n",(0,o.jsx)(r,{})," drops the excess logs and reports doing so."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Start command:"})," This is the command that ",(0,o.jsx)(r,{})," uses to start each instance of your app. This start command differs by app framework."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.h3,{id:"-limit-the-upload-files-optional",children:[(0,o.jsx)("a",{id:"exclude"})," Limit the upload files (optional)"]}),"\n",(0,o.jsxs)(s.p,{children:["By default, ",(0,o.jsx)(r,{})," uploads all app files except version control files and directories with names such as ",(0,o.jsx)(s.code,{children:".svn"}),", ",(0,o.jsx)(s.code,{children:".git"}),", and ",(0,o.jsx)(s.code,{children:"_darcs"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(l,{})," recommends that you explicitly exclude extraneous files residing within your app directory, particularly if your app is large. For example, if you build your app locally and push it as a binary, you can save resources by not uploading any of the app's source code."]}),"\n",(0,o.jsx)(s.p,{children:"To exclude files from upload:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Create a ",(0,o.jsx)(s.code,{children:".cfignore"})," file that lists the files to exclude."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Save the ",(0,o.jsx)(s.code,{children:".cfignore"})," file to the directory where you run the ",(0,o.jsx)(s.code,{children:"cf push"})," command."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["For more information, see ",(0,o.jsx)(s.a,{href:"prepare-to-deploy.html#exclude",children:"Ignore Unnecessary Files When Pushing"})," in ",(0,o.jsx)(s.em,{children:"Considerations for Designing and Running an App in the\nCloud"}),"."]}),"\n",(0,o.jsxs)(s.h3,{id:"-configure-app-initialization-optional",children:[(0,o.jsx)("a",{id:"profile"})," Configure app initialization (optional)"]}),"\n",(0,o.jsxs)(s.p,{children:["You can configure the  ",(0,o.jsx)(s.code,{children:"cf push"})," command to run custom initialization tasks for an app."]}),"\n",(0,o.jsxs)(s.p,{children:["These tasks run after ",(0,o.jsx)(r,{})," loads the app droplet but before it starts the app to allow the initialization script to access the app language runtime environment. For example, your script can map values from ",(0,o.jsx)(s.code,{children:"$VCAP_SERVICES"})," into other environment variables or a config file that the app uses."]}),"\n",(0,o.jsxs)("div",{class:"note important",children:[(0,o.jsx)(s.p,{children:"The following notes include important information about configuring app initialization when you use certain buildpacks:"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.em,{children:"Java:"})," Initialization scripts for the Java buildpack require additional configuration."]}),"CF"!=t.A.platform_code?(0,o.jsxs)(o.Fragment,{children:["For more information, see ",(0,o.jsx)("a",{href:"https://community.pivotal.io/s/article/how-to-modify-the-application-container-environment-prior-to-application-execution?language=en_US",children:"How to Modify the Application Container Environment prior to Application Execution"})," in the VMware Tanzu Knowledge Base."]}):null]}),(0,o.jsx)("li",{children:(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.em,{children:"PHP:"})," ",(0,o.jsx)(r,{})," does not support initialization scripts for the PHP buildpack versions prior to v4.3.18. If you use\none of these buildpack versions, your app hosts the ",(0,o.jsx)("code",{children:".profile"})," script's contents. This means that any app staged using the affected buildpack\nversions can leak credentials placed in the ",(0,o.jsx)("code",{children:".profile"})," script."]})})]})]}),"\n",(0,o.jsx)(s.p,{children:"To run initialization tasks:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Create a ",(0,o.jsx)(s.code,{children:".profile"})," script that contains the initialization tasks."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Save the ",(0,o.jsx)(s.code,{children:".profile"})," script to the directory where you run the ",(0,o.jsx)(s.code,{children:"cf push"})," command."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["The following example ",(0,o.jsx)(s.code,{children:".profile"})," file uses ",(0,o.jsx)(s.code,{children:"bash"})," to set a value for the environment variable ",(0,o.jsx)(s.code,{children:"LANG"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"# Set the default LANG for your apps\nexport LANG=en_US.UTF-8\n"})}),"\n",(0,o.jsx)(s.p,{children:"Setting this value at the operating system level allows the app to find out which language to use for error messages and instructions, collating sequences, and date formats."}),"\n",(0,o.jsxs)(s.p,{children:["Your app root directory might also include a ",(0,o.jsx)(s.code,{children:".profile.d"})," directory that contains bash scripts that perform initialization tasks for the buildpack. Developers\nmust not edit these scripts unless they are using a custom buildpack. For more information about custom buildpacks, see ",(0,o.jsx)(s.a,{href:"../../buildpacks/custom.html",children:"Custom\nBuildpacks"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Initialization tasks as described here are also called ",(0,o.jsx)(s.em,{children:"pre-runtime hooks"})," and ",(0,o.jsxs)(s.em,{children:[(0,o.jsx)(s.code,{children:".profile"})," tasks"]}),"."]}),"\n",(0,o.jsxs)(s.h3,{id:"-custom-push-the-app",children:[(0,o.jsx)("a",{id:"custom-cf-push"})," Custom push the app"]}),"\n",(0,o.jsxs)(s.p,{children:["To specify custom options when pushing an app with ",(0,o.jsx)(s.code,{children:"cf push"}),", you can include them in one or both of the following:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"cf push"})," command itself."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"A manifest file."}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["The manifest file must be named ",(0,o.jsx)(s.code,{children:"manifest.yml"})," and reside in the directory where you run ",(0,o.jsx)(s.code,{children:"cf push"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["The manifest can include the app name, which lets you run ",(0,o.jsx)(s.code,{children:"cf push"})," with no arguments."]}),"\n",(0,o.jsxs)(s.li,{children:["The manifest can also include a ",(0,o.jsx)(s.code,{children:"services"})," block that lists service instances for the app to bind. For more information, see\n",(0,o.jsx)(s.a,{href:"manifest-attributes.html#services-block",children:"Services"})," in ",(0,o.jsx)(s.em,{children:"App Manifest Attribute Reference"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["For information about how app settings change from push to push, including how command-line options, manifests, and commands like ",(0,o.jsx)(s.code,{children:"cf scale"})," interact, see\n",(0,o.jsx)(s.a,{href:"manifest.html",children:"Deploying with App Manifests"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["For a full list of ",(0,o.jsx)(s.code,{children:"cf push"})," options, see the ",(0,o.jsx)(s.a,{href:"https://cli.cloudfoundry.org/en-US/cf/push.html",children:"Cloud Foundry CLI reference guide"}),"."]}),"\n",(0,o.jsxs)(s.h3,{id:"-configure-app-services-optional",children:[(0,o.jsx)("a",{id:"services"})," Configure app services (optional)"]}),"\n",(0,o.jsx)(s.p,{children:"If a newly-pushed app has the same name and route as an older app version, the new app retains the service bindings and service configuration of the\npreviously-pushed version."}),"\n",(0,o.jsx)(s.p,{children:"For apps that are not already set up for the services that they use:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Bind the services to the app. For more information about services, see ",(0,o.jsx)(s.a,{href:"../services/index.html",children:"Services overview"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["(Optional) Configure the app with the service URL and credentials, if needed. For more information, see ",(0,o.jsx)(s.a,{href:"../../buildpacks/java/configuring-service-connections.html",children:"Configuring Service\nConnections"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.h3,{id:"-build-custom-push-workflows-optional",children:[(0,o.jsx)("a",{id:"sub-steps"})," Build custom push workflows (optional)"]}),"\n",(0,o.jsxs)(s.p,{children:["The CF CLI includes ",(0,o.jsx)(s.a,{href:"../push-sub-commands.html",children:"composible push sub-step\ncommands"})," that empower you to build your own push.\nThese are useful if the default behavior of ",(0,o.jsx)(s.code,{children:"cf push"})," does not match your\nneeds, or if you want to implement more complicated app build, promotion, and\nrun workflows."]}),"\n",(0,o.jsxs)(s.h2,{id:"-app-updates-and-downtime",children:[(0,o.jsx)("a",{id:"updates"})," App updates and downtime"]}),"\n",(0,o.jsxs)(s.p,{children:["By default, when you push an app that is already running, ",(0,o.jsx)(r,{})," stops all existing instances of that app. Users who try to access the app see a ",(0,o.jsx)(s.code,{children:"404 Not Found"})," message while ",(0,o.jsx)(s.code,{children:"cf push"})," runs."]}),"\n",(0,o.jsxs)(s.p,{children:["When old and new versions of your app can run simultaneously, you can avoid app downtime by using ",(0,o.jsx)(s.a,{href:"./rolling-deploy.html",children:"Rolling deployments"}),". Alternatively, you can use the blue-green deployment method to swap routes between app versions running in parallel. For more information, see ",(0,o.jsx)(s.a,{href:"blue-green.html",children:"Using blue-green deployment to reduce downtime and risk"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"With some app updates, old and new versions of your code must never run at the same time. A worst-case example is if your app update migrates a database schema, causing old app instances to fail and lose user data. To prevent this, you must stop all running instances of your app before you push the new version."}),"\n",(0,o.jsxs)(s.h2,{id:"-troubleshoot-app-push-problems",children:[(0,o.jsx)("a",{id:"troubleshoot-push"})," Troubleshoot app push problems"]}),"\n",(0,o.jsxs)(s.p,{children:["If your app does not start on ",(0,o.jsx)(r,{}),", first ensure that the app can run locally."]}),"\n",(0,o.jsxs)(s.p,{children:["To troubleshoot your app in the cloud using the cf CLI, see ",(0,o.jsx)(s.a,{href:"troubleshoot-app-health.html",children:"Troubleshoot app deployment and health"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}function u(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>r});var i=n(6540);const o={},a=i.createContext(o);function t(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);