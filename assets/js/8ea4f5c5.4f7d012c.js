"use strict";(self.webpackChunkcf_docs_new=self.webpackChunkcf_docs_new||[]).push([[2674],{2925:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"docs-cf-cli/docs/v8","title":"Upgrading to cf CLI v8","description":"You can use Cloud Foundry Command Line Interface (cf CLI) v8 to interact with Cloud Foundry API (CAPI) V3. This topic describes the major changes between cf CLI v7","source":"@site/content_repos/docs-cf-cli/docs/v8.md","sourceDirName":"docs-cf-cli/docs","slug":"/docs-cf-cli/docs/v8","permalink":"/cf-docs-new/docs-cf-cli/docs/v8","draft":false,"unlisted":false,"editUrl":"https://github.com/cloudfoundry/docs-cloudfoundry-concepts/tree/master/content_repos/docs-cf-cli/docs/v8.md","tags":[],"version":"current","lastUpdatedAt":1744291524000,"frontMatter":{"title":"Upgrading to cf CLI v8","owner":"CLI"},"sidebar":"cloudfoundryConcepts","previous":{"title":"Upgrading to cf CLI v7","permalink":"/cf-docs-new/docs-cf-cli/docs/v7"},"next":{"title":"Contribute to Cloud Foundry documentation","permalink":"/cf-docs-new/docs-cloudfoundry-concepts/contribute"}}');var r=n(4848),d=n(8453);const c={title:"Upgrading to cf CLI v8",owner:"CLI"},o=void 0,t={},l=[{value:"<a></a> New workflows supported by cf CLI v8",id:"-new-workflows-supported-by-cf-cli-v8",level:2},{value:"<a></a> Install cf CLI v8",id:"-install-cf-cli-v8",level:2},{value:"<a></a> Prerequisites",id:"-prerequisites",level:3},{value:"<a></a> Command differences",id:"-command-differences",level:2},{value:"<a></a> Manifest differences",id:"-manifest-differences",level:3},{value:"<a></a> About scripting",id:"-about-scripting",level:3},{value:"<a></a> Table of differences",id:"-table-of-differences",level:3}];function a(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"You can use Cloud Foundry Command Line Interface (cf CLI) v8 to interact with Cloud Foundry API (CAPI) V3. This topic describes the major changes between cf CLI v7\nand cf CLI v8."}),"\n",(0,r.jsx)(s.p,{children:"The cf CLI development team aims to provide:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"A seamless upgrade experience from cf CLI v7. Changes are minimal. Where there are changes, the team has incorporated feedback from the community to simplify the cf CLI user experience."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Details about potential breaking changes and alternative workflows for scripting environments."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["To understand the differences between specific commands, see ",(0,r.jsx)(s.a,{href:"#differences",children:"Command differences"})," below."]}),"\n",(0,r.jsxs)(s.p,{children:["For more information about CAPI V3, see the ",(0,r.jsx)(s.a,{href:"https://v3-apidocs.cloudfoundry.org/index.html#introduction",children:"CAPI V3 documentation"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["For more information about cf CLI v8, see ",(0,r.jsx)(s.a,{href:"https://github.com/cloudfoundry/cli/releases/tag/v8.0.0",children:"v8.0.0"})," in GitHub."]}),"\n",(0,r.jsxs)(s.h2,{id:"-new-workflows-supported-by-cf-cli-v8",children:[(0,r.jsx)("a",{id:"new-workflows"})," New workflows supported by cf CLI v8"]}),"\n",(0,r.jsx)(s.p,{children:"Some key new features available through the cf CLI v8 are:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Asynchronous service operations"}),": All service-related operations are now asynchronous by default. This includes manipulating service keys and route bindings."]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"-install-cf-cli-v8",children:[(0,r.jsx)("a",{id:"install"})," Install cf CLI v8"]}),"\n",(0,r.jsxs)(s.p,{children:["To install cf CLI v8, see the ",(0,r.jsx)(s.a,{href:"https://github.com/cloudfoundry/cli#downloads",children:"README"})," in the Cloud Foundry CLI repository on GitHub.\nIt includes instructions for downloading the latest CAPI release candidate, which is what the cf CLI v8 beta is tested against."]}),"\n",(0,r.jsxs)(s.p,{children:["In cf CLI v8, Golang has been updated from v1.13 to v1.16.\nWhen targeting a foundation that does not have a SAN, you might encounter errors because the common name field is deprecated in Golang v1.15 and later.\nFor more information, see ",(0,r.jsx)(s.a,{href:"https://golang.org/doc/go1.15#commonname",children:"X.509 CommonName deprecation"})," in the Golang v1.15 release notes."]}),"\n",(0,r.jsxs)(s.h3,{id:"-prerequisites",children:[(0,r.jsx)("a",{id:"prerequisites"})," Prerequisites"]}),"\n",(0,r.jsxs)(s.p,{children:["The cf CLI v8 requires ",(0,r.jsx)(s.a,{href:"https://github.com/cloudfoundry/cf-deployment",children:"cf-deployment"})," v16.11.0 or later."]}),"\n",(0,r.jsx)(s.p,{children:"This version of cf-deployment contains CAPI release v1.109.0, which provides the CAPI V3 API v3.99.0."}),"\n",(0,r.jsxs)(s.p,{children:["For more information, see the cf CLI ",(0,r.jsx)(s.a,{href:"https://github.com/cloudfoundry/cli/wiki/Versioning-and-Support-Policy",children:"Versioning and Support Policy"})," on GitHub."]}),"\n",(0,r.jsxs)(s.h2,{id:"-command-differences",children:[(0,r.jsx)("a",{id:"differences"})," Command differences"]}),"\n",(0,r.jsx)(s.p,{children:"These sections describe changes in commands from cf CLI v7 to cf CLI v8. They also provide important information for those who use the cf CLI in scripts."}),"\n",(0,r.jsxs)(s.p,{children:["For information about possible breaking changes, see the ",(0,r.jsx)(s.a,{href:"#table",children:"Table of differences"})," below. This table includes removed flag options, updated output, and removed or changed argument requirements."]}),"\n",(0,r.jsxs)(s.h3,{id:"-manifest-differences",children:[(0,r.jsx)("a",{id:"manifests"})," Manifest differences"]}),"\n",(0,r.jsxs)(s.p,{children:["When you apply a manifest by running ",(0,r.jsx)(s.code,{children:"cf push"}),", cf CLI v8 does not provide a manifest diff through the V3 manifest diff endpoint.\nThis new endpoint supports version 1 manifests only.\nFor more information, see ",(0,r.jsx)(s.a,{href:"https://v3-apidocs.cloudfoundry.org/version/3.102.0/index.html#create-a-manifest-diff-for-a-space-experimental",children:"Create a manifest diff for a space (experimental)"})," in the CAPI documentation."]}),"\n",(0,r.jsxs)(s.h3,{id:"-about-scripting",children:[(0,r.jsx)("a",{id:"scripting"})," About scripting"]}),"\n",(0,r.jsx)(s.p,{children:"If you have scripts that rely on the cf CLI, this section describes possible changes in cf CLI v8 that might affect scripts."}),"\n",(0,r.jsx)(s.p,{children:"Some of these changes are:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Style changes, including changes in the order or wording of the output."}),"\n",(0,r.jsxs)(s.li,{children:["cf CLI v8 uses CAPI V3 to make requests related to services. CAPI V3 creates asynchronous jobs. If you want to continue to create jobs synchronously, use the new ",(0,r.jsx)(s.code,{children:"--wait"})," flag."]}),"\n",(0,r.jsx)(s.li,{children:"JSON response changes such as additional elements or nesting, which may impact parsing in existing scripts."}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"-table-of-differences",children:[(0,r.jsx)("a",{id:"table"})," Table of differences"]}),"\n",(0,r.jsx)(s.p,{children:"The following table summarizes how commands differ between cf CLI v7 and cf CLI v8."}),"\n",(0,r.jsxs)("table",{class:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Command"}),(0,r.jsx)("th",{children:"Changes"})]})}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf bind-service"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the bind operation to complete."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf bind-route-service"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Bind route operation is async by default."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the bind operation to complete."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf create-service"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the create operation to complete."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf create-service-key"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Create operation is async by default."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the create operation to complete."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf delete-service"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the delete operation to complete."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf delete-service-key"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Delete operation is async by default."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the delete operation to complete."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf create-route"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--option"})," to specify per-route options in key-value format, e.g. ",(0,r.jsx)("code",{children:"option_name=option_value"}),"."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf map-route"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--app-protocol"})," to use HTTP/2 protocol to communicate with apps. By default, if app-protocol is not set, HTTP/1 protocol is used for HTTP route."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--option"})," to specify per-route options for non-existent routes in key-value format, e.g. ",(0,r.jsx)("code",{children:"option_name=option_value"}),"."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf marketplace"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--show-unavailable"})," to show plans that are not available for use."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf apps"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New]:"})," Added ",(0,r.jsx)("code",{children:"per-route options"})," to output."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf app"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New]:"})," Added ",(0,r.jsx)("code",{children:"per-route options"})," to output."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf route"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New]:"})," New command for viewing details about a route and its destinations."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New]:"})," Added ",(0,r.jsx)("code",{children:"per-route options"})," to output."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf routes"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Added ",(0,r.jsx)("code",{children:"service instance"})," column to output."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Added ",(0,r.jsx)("code",{children:"options"})," column to output."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf update-route"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New]:"})," New command for managing route-specific options."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New flag]:"})," Use ",(0,r.jsx)("code",{children:"--option"})," to specify per-route options in key-value format, e.g. ",(0,r.jsx)("code",{children:"option_name=option_value"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[New flag]:"})," Use ",(0,r.jsx)("code",{children:"--remove-option"})," to specify a per-route option to delete, e.g. ",(0,r.jsx)("code",{children:"option_name"}),"."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf service"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--params"})," to retrieve and display the given service instances's parameters as JSON. All other output is suppressed."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Displays information about ",(0,r.jsx)("code",{children:"guid"}),", ",(0,r.jsx)("code",{children:"type"}),", and ",(0,r.jsx)("code",{children:"broker tags"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," The ",(0,r.jsx)("code",{children:"service"})," field is renamed to ",(0,r.jsx)("code",{children:"offering"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," The ",(0,r.jsx)("code",{children:"service broker"})," field is renamed to ",(0,r.jsx)("code",{children:"broker"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," The ",(0,r.jsx)("code",{children:"dashboard"})," field is renamed to ",(0,r.jsx)("code",{children:"dashboard url"}),"."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Minor changes to the ordering and wording of each block of information."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf service-key"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Displays information about ",(0,r.jsx)("code",{children:"last operation"})," and ",(0,r.jsx)("code",{children:"message"})," as new columns."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Response]:"})," All JSON response elements from v7 are now wrapped into an additional element named ",(0,r.jsx)("code",{children:"credentials"}),"."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf services"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--no-apps"})," to not retrieve bound apps information."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the operation to complete."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf unbind-service"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the unbind operation to complete."]})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{class:"nowrap",children:(0,r.jsx)("code",{children:"cf unbind-route-service"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Update]:"})," Unbind route operation is async by default."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the unbind operation to complete."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf update-service"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," Use ",(0,r.jsx)("code",{children:"--wait"})," to wait for the update operation to complete."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Removed flag]:"})," ",(0,r.jsx)("code",{children:"--upgrade"}),". Use new command ",(0,r.jsx)("code",{children:"cf upgrade-service"})," to upgrade a plan."]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:"cf upgrade-service"})}),(0,r.jsx)("td",{children:(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[Added flag]:"})," ",(0,r.jsx)("code",{children:"--force"}),". There is no longer user interaction required on this command."]})})})]})]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>o});var i=n(6540);const r={},d=i.createContext(r);function c(e){const s=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);